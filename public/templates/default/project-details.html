<div class="project-details-loading" ng-if="!project">
  <span class="ion-load-c"></span>
</div>
<div ng-if="project">
  <div class="project-details-header">
    <project-upvote project="project"></project-upvote>
    <a  class="avatar" ui-sref="user.votes({name: project.user.name})"><img image-src="{{project.user.avatar}}" v="avatar.small"></a>
    <div class="info">
      <h1 class="title">
        <a target="_blank" href="/projects/{{project.id}}/link">{{project.name}}</a>
      </h1>
      <span class="description" ng-bind-html="project.description"></span>
    </div>
  </div>
  <div class="project-details-submitted">
    <div class="hunter">
      <user-avatar class="avatar" user="project.user" v="avatar.extra.small"></user-avatar>
      <h2 class="time">提交于 <span>{{project.created_at|amTimeAgo}}</span></h2>
    </div>
    <div class="options">
      <div class="share">
        <h5>分享</h5>
        <div class="share-btns">
          <a target="_blank" href="/projects/{{project.id}}/share?to=weibo" class="share-btn weibo">
            <svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0, 0, 300, 300">
              <path d="M196.802 39.964c-8.656 3.787-10.64 12.803-4.328 19.115 3.066 3.066 5.951 3.607 18.574 3.607 17.673 0 29.575 4.688 38.592 15.148 11 12.443 12.263 16.23 12.263 38.952 0 20.197 0 20.558 4.688 23.263 10.82 6.131 18.034-1.443 20.558-21.64 3.246-26.329-12.443-56.986-36.066-71.052-15.509-9.016-42.018-12.623-54.281-7.393zm-88.724 33.542c-20.198 7.213-39.674 21.099-60.592 43.46-49.592 52.658-46.346 102.791 8.295 129.48 56.805 27.771 133.267 18.574 174.924-21.099 31.198-29.575 27.411-66.724-8.115-79.347-6.312-2.164-8.296-3.787-7.394-5.771 3.246-7.934 4.328-17.131 2.525-22.541-5.591-17.132-25.968-21.099-56.264-10.82l-12.083 4.147 1.082-12.082c1.263-14.246-1.803-22.001-10.279-26.329-7.033-3.607-20.558-3.246-32.099.902zm50.133 69.789c26.869 7.394 43.28 23.624 43.28 42.919 0 21.46-19.116 40.756-50.133 51.035-16.591 5.41-47.428 6.492-62.576 2.344-28.673-8.115-44.903-23.984-44.903-44.362 0-11.181 4.869-20.919 15.509-30.837 9.918-9.377 17.492-13.886 32.099-18.755 22.001-7.393 45.625-8.295 66.724-2.344zm-56.806 17.492c-18.213 8.476-27.951 21.46-27.951 37.69 0 14.788 6.492 24.886 20.738 32.46 11 5.951 31.198 5.41 43.461-.901 15.689-8.296 25.968-23.624 25.968-38.592-.181-12.263-11.001-26.87-23.804-32.099-10.279-4.328-27.592-3.607-38.412 1.442zm13.165 33.903c1.262 1.262 2.164 4.328 2.164 7.033 0 9.017-15.148 16.411-21.28 10.279-3.426-3.426-2.524-11.902 1.443-15.869 3.967-3.968 14.246-4.869 17.673-1.443zm85.298-117.758c-8.296 8.296-2.705 18.214 10.459 18.214 11.361 0 16.41 5.771 16.41 18.755 0 8.115.722 10.459 3.968 12.623 9.738 6.853 17.673-.721 17.673-16.771 0-19.656-14.067-34.444-34.084-35.887-9.016-.721-11.18-.18-14.426 3.066z"/>
            </svg>
          </a>
          <a target="_blank" href="/projects/{{project.id}}/share?to=weixin" class="share-btn weixin">
            <svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0, 0, 400, 400">
              <path d="M120.601,46.576 C9.241,66.466 -27.879,192.281 60.7,249.869 C65.557,252.991 65.557,252.645 58.271,274.385 L52.027,293.002 L74.461,280.976 L96.895,268.95 L108.806,271.841 C121.294,274.963 137.253,277.16 147.891,277.16 L154.252,277.16 L152.054,268.718 C134.593,204.423 194.956,140.706 273.475,140.706 L284.114,140.706 L281.917,133.074 C264.686,72.826 191.95,33.856 120.601,46.576 z M110.887,102.892 C122.682,110.872 123.376,128.102 112.043,135.503 C93.657,147.529 72.148,126.367 84.521,108.327 C89.956,100.233 103.024,97.573 110.887,102.892 z M205.711,102.892 C225.138,115.96 210.568,146.141 188.827,137.815 C173.101,131.802 171.25,110.178 185.936,102.43 C191.718,99.308 200.738,99.539 205.711,102.892 z M248.613,150.536 C193.453,160.596 155.177,202.457 157.374,250.563 C160.265,314.974 235.777,359.379 308.282,339.489 L316.839,337.176 L334.879,346.89 C344.824,352.325 353.15,356.257 353.381,355.794 C353.613,355.216 351.647,348.278 349.103,340.299 C343.321,322.49 343.205,323.762 350.953,318.212 C438.144,255.651 361.592,130.068 248.613,150.536 z M246.416,202.457 C251.272,205.695 253.816,213.79 251.735,219.688 C247.341,232.292 228.492,233.217 223.403,221.075 C217.621,207.083 233.58,194.131 246.416,202.457 z M323.662,203.845 C331.294,211.13 330.022,223.504 321.118,228.129 C307.473,235.067 293.134,221.191 300.188,207.892 C304.813,199.335 316.724,197.254 323.662,203.845 z M220.43,328.772"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div class="project-details-upvoted">
    <h2 class="title">共 {{project.vote_count}} 个赞</h2>
    <div class="content">
      <div class="null" ng-if="!project.vote_count">
        <span class="ion-sad-outline"></span> 该项目还没有人点赞。
      </div>
      <ul class="items" ng-if="project.vote_count">
        <li class="item" ng-repeat="user in project.votes"><user-avatar class="people" user="user" v="avatar.small"></user-avatar></li>
      </ul>
    </div>
  </div>
  <div class="project-details-comments">
    <h2 class="title">共 {{project.comment_count}} 条评论</h2>
    <div class="content">
      <div class="null" ng-if="!project.comment_count">
        <span class="ion-sad-outline"></span> 该项目还没有人评论。
      </div>
      <ul class="items" ng-if="project.comment_count">
        <li class="item" ng-repeat="comment in project.comments | filter: filterComments">
          <user-avatar class="people" user="comment.user" v="avatar.small"></user-avatar>
          <div class="c">
            <h3>
              {{comment.user.name}}<span>{{comment.user.nickname}}</span>
              <comment-delete project="project" comment="comment" ng-if="comment.user.is_me"></comment-delete>
            </h3>
            <div class="text" ng-bind-html="comment.content | replaceWrap"></div>
            <span class="time">{{comment.created_at|amTimeAgo}}</span>
            <div class="options">
              <comment-upvote comment="comment"></comment-upvote>
              <a href="#">
                <span class="ion-ios-undo"></span>
                <span class="t">回复</span>
              </a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
  <div class="project-details-comment-new" ng-if="$root.me !== null"><comment  project="project"></comment></div>
</div>
